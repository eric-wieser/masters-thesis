% Use documentclass[wide]{IIBproject} to have narrower margins
\documentclass[12pt,a4paper]{IIBproject}

% vital stuff
\usepackage[utf8]{inputenc}
\usepackage{subfiles}
\usepackage{ifthen}

% tools used
\usepackage{enumitem}
\usepackage{multicol}
\usepackage{listings}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{bm}
\newcommand*\diff{\mathop{}\!\mathrm{d}}
\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{siunitx}
\usepackage{multirow,bigdelim}
\usepackage[onehalfspacing]{setspace}

\lstset{
	basicstyle=\ttfamily\footnotesize,
	breaklines=true,
	keywordstyle=\color{blue}\ttfamily}

\usepackage{tikz}
\usetikzlibrary{calc}
\usetikzlibrary{decorations.pathreplacing}
\newcommand{\tikzmark}[1]{\tikz[overlay,remember picture] \node (#1) {};}


% related to links and references
\usepackage{xr-hyper}
\usepackage[bookmarks,bookmarksopen]{hyperref}
\usepackage{cleveref}


% bibliography stuff
\usepackage[sorting=none,backend=biber,bibencoding=utf8]{biblatex}
\providecommand{\thebibpath}{.}
\addbibresource{\thebibpath/main.bib}
\newcommand{\printbibsectioned}{
	\printbibliography[
		notkeyword={hardware}, notkeyword={software},
		title={References},
		heading=bibintoc]
	\printbibliography[
		notkeyword={hardware}, keyword={software},
		title={Software packages},
		heading=subbibintoc]
	\printbibliography[
		keyword={hardware},
		title={Hardware datasheets},
		heading=subbibintoc]
}
\newboolean{printBibInSubfiles}
\setboolean{printBibInSubfiles}{true}
\def\bib{\ifthenelse{\boolean{printBibInSubfiles}}
        {\printbibsectioned}
        {}
    }


\pagestyle{empty}

\begin{document}
	\setboolean{printBibInSubfiles}{false}


	% Title Page
	\author{Eric Wieser}
	\supervisor{Prof. Carl Rasmussen}
	\title{Machine learning for a miniature robotic unicycle}
	\maketitle
	\thispagestyle{empty}



	% Summary
	\begin{abstract}
	No more than 100 words.
	\end{abstract}
	\pagestyle{plain}
	\tableofcontents
	\newpage

	\chapter{Introduction}
	\subfile{sections/intro}

	\chapter{Review of the current system design}
	\subfile{sections/review}

	\chapter{Design changes and new features}

		\section{Electrical design}
		\subfile{sections/electrical}

		\section{Embedded software}
		\subfile{sections/embedded}

		\section{Matlab toolbox}
		\subfile{sections/matlab}

	\chapter{System verification}
	\subfile{sections/verification}

	\chapter{Machine learning experiments}

		\section{Simulation}

			\subsection{Small unicycle}

			\subsection{Uniform cost function}

			\subsection{Roll limits}

		\section{Reality}

	\chapter{Conclusions}

	\printbibsectioned

	\appendix


	\chapter{Source code repositories}
	\subfile{sections/repos}

	\chapter{Risk assessment retrospective}
	\subfile{sections/risk-assessment}

	\chapter{A primer on quaternions}
	\subfile{sections/quaternions}

	\chapter{Zero-overhead bug-free pin assignments in C++}

\end{document}
